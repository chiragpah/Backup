<div class="comment_container">

  <h3 class="comment_username username">Discussion</h3>


  <div *ngFor="let comment of comments">
    <div class="comment_image_container ">
      <div>
        <img [src]="comment.user.avatar.url" width="50" height="50" alt="" class="comment_image">
      </div>
      <div class="comment_username ">
        <h5 class="username"> {{comment.user.name}}</h5>
        <div class="comment_text_container">
          <p class="comment_text">{{comment.comment}}</p>
          <div class="comment_reply_section">
            <span class="comment_reply_innercontainer" (click)="toggleReplies(comment)"> {{ comment.showReplies ? 'Hide
              Replies' : 'Show Replies' }}</span>
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24"
              class="text-[#ffffff83] cursor-pointer" height="20" width="20" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M20 2H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h3v3.767L13.277 18H20c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zm0 14h-7.277L9 18.233V16H4V4h16v12z">
              </path>
            </svg><span class="reply_icon">{{(comment.commentReplies).length}}</span>
          </div>
        </div>
      </div>

    </div>
    <div *ngIf="comment.showReplies">
      <div class="comment_reply1" *ngFor="let reply of comment.commentReplies">
        <div><img [src]="reply.user.avatar.url" width="50" height="50" alt="" class="comment_image"></div>
        <div style="padding-left:0.75rem;">
          <div class="comment_reply2">
            <h5 style="font-size: 20px;">{{reply.user.name}}</h5>
          </div>
          <p>{{reply.reply}}</p>
        </div>
      </div>

      <div class="comment_reply_input1">
        <input placeholder="Enter your answer..." class="comment_reply_input2" type="text" value="" #replyInputRef>
        <button type="submit" class="comment_reply_btn"
          (click)="addreply(comment._id,replyInputRef.value)">submit</button>
      </div>
    </div>
  </div>


  <div class="textsection">
    <textarea class="comment_textsection" [(ngModel)]="newQuestionText" placeholder='Type Your Comment'
      required></textarea>
  </div>

  <div class="button_container">
    <button mat-raised-button class="btnstyle comment_button" (click)="addComment()">Ask
      Question</button>

  </div>



</div>